# 🛠️ **ShiftAnalysis運用ハンドブック**

## **運用体制概要**

**システム名**: ShiftAnalysis v1.0  
**運用開始**: 2025年8月27日  
**運用体制**: 24時間365日監視  
**責任部署**: IT部・業務部連携  

---

## 👥 **運用チーム構成**

### **役割分担**

#### **システム管理者 (1名)**
- **主要業務**: システム全体管理・技術判断
- **勤務体制**: 平日9-18時 + オンコール対応
- **必要スキル**: サーバー管理・Python・トラブルシューティング

#### **業務責任者 (1名)**  
- **主要業務**: 業務要件管理・ユーザーサポート
- **勤務体制**: 平日9-17時
- **必要スキル**: シフト管理業務・システム仕様理解

#### **サポート担当 (2名)**
- **主要業務**: 問い合わせ対応・ユーザーサポート
- **勤務体制**: 平日9-17時 (2名体制でカバー)
- **必要スキル**: システム操作・問い合わせ対応

---

## 📅 **運用スケジュール**

### **日次運用業務**

#### **始業時チェック (9:00-9:30)**
```cmd
# システム稼働確認
production_scripts\health_check.bat

# 前日ログ確認
type production_logs\access.log | find "ERROR"
type production_logs\error.log

# 監視状況確認
type production_monitoring\health_status.json
```

**確認項目**:
- [ ] システム正常起動
- [ ] 前日エラー無し
- [ ] リソース使用率正常
- [ ] バックアップ実行成功

#### **日中監視 (9:30-17:30)**
- **30分間隔**: 監視ダッシュボード確認
- **1時間間隔**: アクセス状況・パフォーマンス確認
- **随時**: ユーザーサポート・問い合わせ対応

#### **終業時処理 (17:30-18:00)**
```cmd
# 日次レポート生成
python production_monitoring\daily_report.py

# バックアップ実行
production_scripts\create_backup.bat

# 明日の準備確認
production_scripts\pre_check.bat
```

### **週次運用業務 (金曜日17:00-18:00)**

#### **システムメンテナンス**
```cmd
# 週次メンテナンス実行
production_scripts\weekly_maintenance.bat

# ログファイル整理
production_scripts\log_rotation.bat

# 容量使用状況確認
dir production_backups /s
```

**実施項目**:
- [ ] ログファイルローテーション
- [ ] 一時ファイル削除
- [ ] バックアップファイル整理
- [ ] セキュリティパッチ確認

#### **週次レポート作成**
- **システム稼働状況**: 稼働率・エラー統計
- **利用状況**: アクセス数・処理ファイル数
- **パフォーマンス**: 応答時間・リソース使用率
- **サポート状況**: 問い合わせ件数・対応時間

### **月次運用業務 (月末最終営業日)**

#### **月次メンテナンス**
```cmd
# システム全体チェック
production_scripts\monthly_maintenance.bat

# セキュリティスキャン
production_scripts\security_scan.bat

# パフォーマンス分析
python production_monitoring\performance_analysis.py
```

**実施項目**:
- [ ] システムアップデート適用
- [ ] セキュリティ設定見直し
- [ ] ユーザーアカウント整理
- [ ] 容量拡張・性能改善検討

#### **月次レポート作成**
- **運用実績**: KPI達成状況・改善効果
- **問題・課題**: 発生問題・解決状況・改善提案
- **利用分析**: ユーザー満足度・活用状況
- **次月計画**: 予定作業・改善計画

---

## 🔍 **監視・アラート体系**

### **監視項目**

#### **システムリソース**
| 項目 | 警告しきい値 | 危険しきい値 | 確認間隔 |
|------|-------------|-------------|----------|
| CPU使用率 | 70% | 85% | 5分 |
| メモリ使用率 | 75% | 90% | 5分 |
| ディスク使用率 | 80% | 95% | 15分 |
| ネットワーク使用率 | 60% | 80% | 5分 |

#### **アプリケーション**
| 項目 | 警告しきい値 | 危険しきい値 | 確認間隔 |
|------|-------------|-------------|----------|
| 応答時間 | 5秒 | 10秒 | 1分 |
| エラー率 | 2% | 5% | 5分 |
| 同時接続数 | 8 | 10 | 1分 |
| 処理待機数 | 3 | 5 | 1分 |

### **アラート配信**

#### **レベル1 (情報)**
- **対象**: システム管理者
- **配信方法**: システム内通知
- **対応期限**: 1時間以内確認

#### **レベル2 (警告)**
- **対象**: システム管理者・業務責任者
- **配信方法**: メール + システム内通知
- **対応期限**: 30分以内対応開始

#### **レベル3 (緊急)**
- **対象**: 全運用チーム
- **配信方法**: 電話 + メール + SMS
- **対応期限**: 10分以内対応開始

---

## 🚨 **インシデント対応手順**

### **レベル分類**

#### **P1 (最高優先)**
- **定義**: システム完全停止・データ損失・セキュリティ侵害
- **対応時間**: 10分以内着手・2時間以内復旧
- **エスカレーション**: 即座に管理職報告

#### **P2 (高優先)**
- **定義**: 機能一部停止・パフォーマンス著しい低下
- **対応時間**: 30分以内着手・4時間以内復旧
- **エスカレーション**: 1時間以内に管理職報告

#### **P3 (中優先)**
- **定義**: 軽微な機能問題・パフォーマンス低下
- **対応時間**: 2時間以内着手・当日中復旧
- **エスカレーション**: 翌営業日報告

#### **P4 (低優先)**
- **定義**: 要望・改善提案・軽微な不具合
- **対応時間**: 1週間以内着手・計画的対応
- **エスカレーション**: 月次レポートで報告

### **対応フロー**

#### **初期対応 (10分以内)**
1. **事象確認**: 症状・影響範囲・原因推定
2. **影響評価**: 業務への影響度・緊急度判定
3. **初期対応**: 一時復旧・被害拡大防止
4. **関係者通知**: チーム・管理職・ユーザー通知

#### **詳細対応 (30分-2時間)**
1. **原因究明**: ログ解析・システム状態確認
2. **対策実行**: 根本的修正・設定変更
3. **動作確認**: 修正後テスト・影響確認
4. **正式復旧**: 正常稼働確認・ユーザー通知

#### **事後処理 (24時間以内)**
1. **根本原因分析**: Why分析・再発防止策検討
2. **改善策実装**: システム改修・手順改善
3. **報告書作成**: 経緯・原因・対策・改善計画
4. **関係者共有**: 学習事項・改善点共有

---

## 📊 **KPI・品質管理**

### **技術KPI**

#### **可用性**
- **目標**: 99.5%以上
- **測定**: 月次稼働時間 / 総時間
- **改善基準**: 99.0%以下で改善計画策定

#### **パフォーマンス**
- **目標**: 平均応答時間3秒以内
- **測定**: 全処理の応答時間平均
- **改善基準**: 5秒超で改善対応

#### **データ品質**
- **目標**: 処理成功率99.9%以上
- **測定**: 成功処理数 / 総処理数
- **改善基準**: 99.5%以下で問題調査

### **業務KPI**

#### **利用状況**
- **目標**: 月間アクティブユーザー10名以上
- **測定**: 月間ログイン実績
- **改善基準**: 目標未達で利用促進策実施

#### **効率化効果**
- **目標**: 月間20時間以上の作業時間削減
- **測定**: 従来作業時間 - システム利用時間
- **改善基準**: 目標未達で機能改善検討

#### **ユーザー満足度**
- **目標**: 満足度80%以上
- **測定**: 四半期アンケート結果
- **改善基準**: 70%以下で改善計画策定

### **運用KPI**

#### **問い合わせ対応**
- **目標**: 平均対応時間2時間以内
- **測定**: 受付から回答までの時間
- **改善基準**: 4時間超で対応体制見直し

#### **障害対応**
- **目標**: 平均復旧時間30分以内
- **測定**: 発生から復旧までの時間
- **改善基準**: 1時間超で手順見直し

---

## 📋 **チェックリスト・テンプレート**

### **日次チェックリスト**
```
日付: ___/___/___  担当者: ___________

□ システム稼働確認 (___:___)
□ 前日ログ確認 - エラー___件
□ リソース使用率 - CPU___%、メモリ___%、ディスク___%
□ バックアップ状況確認 - 成功/失敗
□ アクセス状況 - ユーザー___名、処理___件
□ 問い合わせ対応 - ___件対応済み
□ 異常・課題 - あり/なし
  └ 詳細: _______________________

確認者サイン: ___________
```

### **インシデント報告テンプレート**
```
インシデント報告書

発生日時: ___/___/___ ___:___
報告者: ___________
優先度: P1/P2/P3/P4

【概要】
症状: _______________________
影響範囲: ___________________
影響ユーザー数: _____________

【対応記録】
初期対応 (___:___): __________
原因究明 (___:___): __________
対策実行 (___:___): __________
復旧完了 (___:___): __________

【根本原因】
技術原因: ___________________
人的原因: ___________________
プロセス原因: _______________

【再発防止策】
即座対応: ___________________
短期対応: ___________________
長期対応: ___________________

承認者: ___________
```

---

## 📞 **連絡先・エスカレーション**

### **運用チーム内部**
- **システム管理者**: 090-XXXX-XXXX
- **業務責任者**: 090-XXXX-XXXX  
- **サポート担当A**: 090-XXXX-XXXX
- **サポート担当B**: 090-XXXX-XXXX

### **管理層・意思決定者**
- **IT部長**: 090-XXXX-XXXX
- **業務部長**: 090-XXXX-XXXX
- **情報システム責任者**: 090-XXXX-XXXX

### **外部サポート**
- **システムベンダー**: 03-XXXX-XXXX
- **インフラベンダー**: 03-XXXX-XXXX
- **緊急時サポート**: 0120-XXX-XXX (24時間対応)

### **エスカレーション基準**
- **P1インシデント**: 即座に部長級報告
- **P2インシデント**: 1時間以内に課長級報告
- **月次KPI未達**: 翌月初に部長級報告
- **セキュリティ問題**: 即座に情報システム責任者報告

---

**作成日**: 2025年8月12日  
**承認者**: IT部長・業務部長  
**改版履歴**: v1.0 (初版)  
**次回見直し**: 運用開始3ヶ月後